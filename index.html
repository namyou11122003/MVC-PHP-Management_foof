<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bootstrap Add to Cart Example</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.min.css">
    <style>
        .cart-badge {
            position: relative;
            top: -8px;
            right: 5px;
        }
        .product-card {
            transition: transform 0.3s;
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .btn-add-to-cart {
            transition: all 0.3s;
        }
        .btn-add-to-cart:hover {
            background-color: #0d6efd;
            color: white;
        }
        .btn-add-to-cart.added {
            background-color: #198754;
            color: white;
        }
        .cart-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Navbar with Cart -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="#">MyShop</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Products</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <button class="btn btn-outline-dark" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartSidebar">
                        <i class="bi bi-cart3"></i>
                        <span id="cartCount" class="badge bg-danger cart-badge">0</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container my-5">
        <h2 class="text-center mb-4">Featured Products</h2>
        
        <div class="row g-4">
            <!-- Product 1 -->
            <div class="col-md-4">
                <div class="card product-card h-100">
                    <img src="/api/placeholder/400/250" class="card-img-top" alt="Product Image">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Premium Headphones</h5>
                        <p class="card-text">High-quality wireless headphones with noise cancellation and premium sound quality.</p>
                        <div class="d-flex justify-content-between align-items-center mt-auto">
                            <span class="h5 mb-0">$149.99</span>
                            <button class="btn btn-outline-primary btn-add-to-cart" data-id="1" data-name="Premium Headphones" data-price="149.99">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Product 2 -->
            <div class="col-md-4">
                <div class="card product-card h-100">
                    <img src="/api/placeholder/400/250" class="card-img-top" alt="Product Image">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Smart Watch</h5>
                        <p class="card-text">Feature-rich smartwatch with health tracking, notifications, and a sleek design.</p>
                        <div class="d-flex justify-content-between align-items-center mt-auto">
                            <span class="h5 mb-0">$99.99</span>
                            <button class="btn btn-outline-primary btn-add-to-cart" data-id="2" data-name="Smart Watch" data-price="99.99">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Product 3 -->
            <div class="col-md-4">
                <div class="card product-card h-100">
                    <img src="/api/placeholder/400/250" class="card-img-top" alt="Product Image">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">Bluetooth Speaker</h5>
                        <p class="card-text">Portable Bluetooth speaker with immersive sound and long battery life.</p>
                        <div class="d-flex justify-content-between align-items-center mt-auto">
                            <span class="h5 mb-0">$79.99</span>
                            <button class="btn btn-outline-primary btn-add-to-cart" data-id="3" data-name="Bluetooth Speaker" data-price="79.99">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cartSidebar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Your Cart</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div id="cartItems">
                <!-- Cart items will be added here -->
                <div class="text-center text-muted" id="emptyCartMessage">
                    <i class="bi bi-cart3 fs-1"></i>
                    <p>Your cart is empty</p>
                </div>
            </div>
            <div class="mt-3 border-top pt-3" id="cartTotal" style="display: none;">
                <div class="d-flex justify-content-between">
                    <span class="fw-bold">Total:</span>
                    <span class="fw-bold" id="totalAmount">$0.00</span>
                </div>
                <button class="btn btn-success w-100 mt-3">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast cart-toast align-items-center text-white bg-success border-0" role="alert" id="cartToast">
        <div class="d-flex">
            <div class="toast-body">
                Item added to cart!
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cart
            let cart = [];
            let cartCount = 0;
            const cartCountElement = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            const emptyCartMessage = document.getElementById('emptyCartMessage');
            const cartTotal = document.getElementById('cartTotal');
            const totalAmount = document.getElementById('totalAmount');
            
            // Initialize toast
            const toastElement = document.getElementById('cartToast');
            const toast = new bootstrap.Toast(toastElement, {
                delay: 2000
            });
            
            // Add event listeners to all "Add to Cart" buttons
            const addToCartButtons = document.querySelectorAll('.btn-add-to-cart');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-id');
                    const productName = this.getAttribute('data-name');
                    const productPrice = parseFloat(this.getAttribute('data-price'));
                    
                    // Add to cart
                    addToCart(productId, productName, productPrice);
                    
                    // Change button style temporarily
                    this.classList.add('added');
                    this.textContent = 'Added!';
                    
                    setTimeout(() => {
                        this.classList.remove('added');
                        this.textContent = 'Add to Cart';
                    }, 1500);
                    
                    // Show toast notification
                    toast.show();
                });
            });
            
            // Add to cart function
            function addToCart(id, name, price) {
                // Check if product already exists in cart
                const existingProduct = cart.find(item => item.id === id);
                
                if (existingProduct) {
                    // Increase quantity
                    existingProduct.quantity += 1;
                } else {
                    // Add new product
                    cart.push({
                        id: id,
                        name: name,
                        price: price,
                        quantity: 1
                    });
                }
                
                // Update cart display
                updateCartDisplay();
            }
            
            // Update cart display
            function updateCartDisplay() {
                // Update count
                cartCount = cart.reduce((total, item) => total + item.quantity, 0);
                cartCountElement.textContent = cartCount;
                
                // Update cart items
                if (cart.length > 0) {
                    emptyCartMessage.style.display = 'none';
                    cartTotal.style.display = 'block';
                    
                    // Clear current items
                    cartItems.innerHTML = '';
                    
                    // Add items to cart
                    let total = 0;
                    
                    cart.forEach(item => {
                        const itemTotal = item.price * item.quantity;
                        total += itemTotal;
                        
                        const cartItem = document.createElement('div');
                        cartItem.className = 'card mb-3';
                        cartItem.innerHTML = `
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <h6 class="card-title">${item.name}</h6>
                                    <button class="btn btn-sm text-danger remove-item" data-id="${item.id}">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mt-2">
                                    <div class="input-group input-group-sm" style="width: 100px;">
                                        <button class="btn btn-outline-secondary decrease-quantity" data-id="${item.id}">-</button>
                                        <input type="text" class="form-control text-center" value="${item.quantity}" readonly>
                                        <button class="btn btn-outline-secondary increase-quantity" data-id="${item.id}">+</button>
                                    </div>
                                    <div>
                                        <span class="text-muted">$${item.price.toFixed(2)} × ${item.quantity}</span>
                                        <div class="fw-bold">$${itemTotal.toFixed(2)}</div>
                                    </div>
                                </div>
                            </div>
                        `;
                        
                        cartItems.appendChild(cartItem);
                    });
                    
                    // Add event listeners to newly created buttons
                    document.querySelectorAll('.remove-item').forEach(button => {
                        button.addEventListener('click', function() {
                            const productId = this.getAttribute('data-id');
                            removeFromCart(productId);
                        });
                    });
                    
                    document.querySelectorAll('.decrease-quantity').forEach(button => {
                        button.addEventListener('click', function() {
                            const productId = this.getAttribute('data-id');
                            decreaseQuantity(productId);
                        });
                    });
                    
                    document.querySelectorAll('.increase-quantity').forEach(button => {
                        button.addEventListener('click', function() {
                            const productId = this.getAttribute('data-id');
                            increaseQuantity(productId);
                        });
                    });
                    
                    // Update total
                    totalAmount.textContent = `$${total.toFixed(2)}`;
                } else {
                    // Cart is empty
                    cartItems.innerHTML = '';
                    cartItems.appendChild(emptyCartMessage);
                    emptyCartMessage.style.display = 'block';
                    cartTotal.style.display = 'none';
                }
            }
            
            // Remove item from cart
            function removeFromCart(id) {
                cart = cart.filter(item => item.id !== id);
                updateCartDisplay();
            }
            
            // Decrease quantity
            function decreaseQuantity(id) {
                const product = cart.find(item => item.id === id);
                if (product) {
                    product.quantity -= 1;
                    if (product.quantity <= 0) {
                        removeFromCart(id);
                    } else {
                        updateCartDisplay();
                    }
                }
            }
            
            // Increase quantity
            function increaseQuantity(id) {
                const product = cart.find(item => item.id === id);
                if (product) {
                    product.quantity += 1;
                    updateCartDisplay();
                }
            }
        });
    </script>
</body>
</html>